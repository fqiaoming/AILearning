![ä¼ä¸šçº§é¡¹ç›®æ¶æ„](./images/enterprise.svg)
*å›¾ï¼šä¼ä¸šçº§é¡¹ç›®æ¶æ„*

# ç¬¬118è¯¾ï¼šã€å®æˆ˜ã€‘ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ

> **æœ¬è¯¾ç›®æ ‡**ï¼šå¿«é€Ÿæ„å»ºä¸€ä¸ªä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ
> 
> **æ ¸å¿ƒæŠ€èƒ½**ï¼šéœ€æ±‚åˆ†æã€å¿«é€Ÿå¼€å‘ã€ç³»ç»Ÿä¼˜åŒ–ã€å®æˆ˜ç»éªŒ
> 
> **å­¦ä¹ æ—¶é•¿**ï¼š90åˆ†é’Ÿ

---

## ğŸ“– å£æ’­æ–‡æ¡ˆï¼ˆ8åˆ†é’Ÿï¼‰
![Customer Service](./images/customer_service.svg)
*å›¾ï¼šCustomer Service*


### ğŸ¯ å‰è¨€

"å®Œæˆäº†æ™ºèƒ½ç ”å‘åŠ©æ‰‹ï¼Œä»Šå¤©å¼€å§‹æ–°é¡¹ç›®ï¼

**ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ**

**é¡¹ç›®èƒŒæ™¯ï¼š**

```
å®¢æˆ·ï¼šæŸä¸­å‹ä¼ä¸šï¼ˆ200äººï¼‰
éƒ¨é—¨ï¼šå…¨å…¬å¸
ç—›ç‚¹ï¼š
â€¢ ä¼ä¸šçŸ¥è¯†åˆ†æ•£
â€¢ æ–‡æ¡£æŸ¥æ‰¾å›°éš¾
â€¢ æ–°å‘˜å·¥åŸ¹è®­æ…¢
â€¢ é‡å¤é—®é¢˜å¤š

ç°çŠ¶ï¼š
â€¢ æ–‡æ¡£åœ¨ä¸åŒç³»ç»Ÿ
  - Confluence Wiki
  - å…±äº«æ–‡ä»¶å¤¹
  - é‚®ä»¶é™„ä»¶
  - ä¸ªäººç”µè„‘

â€¢ æŸ¥æ‰¾æ•ˆç‡ä½
  - ä¸çŸ¥é“åœ¨å“ª
  - æœç´¢ä¸å‡†ç¡®
  - å†…å®¹è¿‡æ—¶
  - æ ¼å¼æ··ä¹±

â€¢ çŸ¥è¯†æµå¤±
  - è€å‘˜å·¥ç¦»èŒ
  - ç»éªŒæœªæ²‰æ·€
  - é—®é¢˜é‡å¤é—®
```

**éœ€æ±‚ï¼š**

```
æ ¸å¿ƒåŠŸèƒ½ï¼š
1. ç»Ÿä¸€çŸ¥è¯†å…¥å£
   â€¢ ä¸€ä¸ªåœ°æ–¹æŸ¥æ‰€æœ‰æ–‡æ¡£
   â€¢ æ™ºèƒ½é—®ç­”
   â€¢ è‡ªåŠ¨åˆ†ç±»

2. æ™ºèƒ½æœç´¢
   â€¢ è¯­ä¹‰ç†è§£
   â€¢ å¤šæ¡ä»¶ç­›é€‰
   â€¢ ç›¸å…³æ¨è

3. çŸ¥è¯†ç®¡ç†
   â€¢ æ–‡æ¡£ä¸Šä¼ 
   â€¢ ç‰ˆæœ¬ç®¡ç†
   â€¢ æƒé™æ§åˆ¶

4. ä½¿ç”¨åˆ†æ
   â€¢ çƒ­é—¨é—®é¢˜
   â€¢ ä½¿ç”¨ç»Ÿè®¡
   â€¢ è´¨é‡è¯„åˆ†

ç›®æ ‡ï¼š
â€¢ æŸ¥æ‰¾æ—¶é—´ï¼šä»30åˆ†é’Ÿ â†’ 1åˆ†é’Ÿ
â€¢ å‡†ç¡®ç‡ï¼š>90%
â€¢ è¦†ç›–ç‡ï¼š>80%ä¼ä¸šæ–‡æ¡£
â€¢ ç”¨æˆ·æ»¡æ„åº¦ï¼š>85%
```

**ä¸ç ”å‘åŠ©æ‰‹çš„åŒºåˆ«ï¼š**

```
æ™ºèƒ½ç ”å‘åŠ©æ‰‹ï¼š
â€¢ é¢å‘ï¼šç ”å‘å›¢é˜Ÿ
â€¢ åœºæ™¯ï¼šæŠ€æœ¯é—®é¢˜
â€¢ åŠŸèƒ½ï¼šä»£ç +Agent
â€¢ å¤æ‚åº¦ï¼šé«˜

çŸ¥è¯†åº“é—®ç­”ï¼š
â€¢ é¢å‘ï¼šå…¨å…¬å¸
â€¢ åœºæ™¯ï¼šä¼ä¸šçŸ¥è¯†
â€¢ åŠŸèƒ½ï¼šé—®ç­”ä¸ºä¸»
â€¢ å¤æ‚åº¦ï¼šä¸­

ç›¸åŒç‚¹ï¼š
â€¢ éƒ½ç”¨RAG
â€¢ éƒ½éœ€è¦æ–‡æ¡£å¤„ç†
â€¢ éƒ½è¦é«˜å‡†ç¡®ç‡

ä¸åŒç‚¹ï¼š
â€¢ ç”¨æˆ·ç¾¤ä½“æ›´å¹¿
â€¢ çŸ¥è¯†ç±»å‹æ›´æ‚
â€¢ æƒé™è¦æ±‚æ›´ä¸¥
â€¢ ç•Œé¢æ›´ç®€å•
```

**æŠ€æœ¯æ–¹æ¡ˆï¼š**

```
ã€ç®€åŒ–ç‰ˆæ¶æ„ã€‘

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å‰ç«¯ï¼ˆç®€åŒ–ï¼‰              â”‚
â”‚  â€¢ æœç´¢æ¡†ï¼ˆä¸»è¦ï¼‰                â”‚
â”‚  â€¢ ç»“æœå±•ç¤º                      â”‚
â”‚  â€¢ æ–‡æ¡£ç®¡ç†                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        åç«¯API                   â”‚
â”‚  â€¢ FastAPI                       â”‚
â”‚  â€¢ é—®ç­”æ¥å£                      â”‚
â”‚  â€¢ ç®¡ç†æ¥å£                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        RAGæ ¸å¿ƒ                   â”‚
â”‚  â€¢ æ–‡æ¡£å¤„ç†                      â”‚
â”‚  â€¢ å‘é‡æ£€ç´¢                      â”‚
â”‚  â€¢ ç­”æ¡ˆç”Ÿæˆ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å­˜å‚¨å±‚                    â”‚
â”‚  â€¢ Qdrantï¼ˆå‘é‡ï¼‰                â”‚
â”‚  â€¢ SQLiteï¼ˆå…ƒæ•°æ®ï¼‰              â”‚
â”‚  â€¢ æœ¬åœ°æ–‡ä»¶ï¼ˆåŸæ–‡ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç²¾ç®€ï¼é«˜æ•ˆï¼
```

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**

```
1. å¿«é€Ÿå¼€å‘
   â€¢ 2å‘¨å®ŒæˆMVP
   â€¢ ä½¿ç”¨æˆç†Ÿç»„ä»¶
   â€¢ æœ€å°åŒ–å®šåˆ¶

2. ç®€å•æ˜“ç”¨
   â€¢ ç•Œé¢ç®€æ´
   â€¢ æ“ä½œç›´è§‚
   â€¢ å­¦ä¹ æˆæœ¬ä½

3. æˆæœ¬å¯æ§
   â€¢ å¼€æºæŠ€æœ¯æ ˆ
   â€¢ å•æœºéƒ¨ç½²
   â€¢ ç»´æŠ¤ç®€å•

4. æ•ˆæœä¿è¯
   â€¢ å‡†ç¡®ç‡>90%
   â€¢ å“åº”å¿«<2s
   â€¢ ç¨³å®šå¯é 
```

**å¼€å‘è®¡åˆ’ï¼š**

```
ç¬¬1å‘¨ï¼šæ ¸å¿ƒåŠŸèƒ½
â€¢ Day 1-2: æ–‡æ¡£å¤„ç†
â€¢ Day 3-4: RAGå®ç°
â€¢ Day 5: åŸºç¡€API

ç¬¬2å‘¨ï¼šå®Œå–„ä¼˜åŒ–
â€¢ Day 1-2: å‰ç«¯ç•Œé¢
â€¢ Day 3: æƒé™æ§åˆ¶
â€¢ Day 4: æµ‹è¯•ä¼˜åŒ–
â€¢ Day 5: éƒ¨ç½²ä¸Šçº¿

å¿«é€Ÿè¿­ä»£ï¼
```

**ä»Šå¤©è¿™ä¸€è¯¾ï¼Œæˆ‘è¦å¸¦ä½ ï¼š**

**ç¬¬ä¸€éƒ¨åˆ†ï¼šéœ€æ±‚åˆ†æ**
- ç”¨æˆ·è°ƒç ”
- åŠŸèƒ½è®¾è®¡
- æŠ€æœ¯é€‰å‹

**ç¬¬äºŒéƒ¨åˆ†ï¼šå¿«é€Ÿå¼€å‘**
- æ–‡æ¡£å¤„ç†
- RAGå®ç°
- APIå¼€å‘

**ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‰ç«¯å®ç°**
- æœç´¢ç•Œé¢
- ç»“æœå±•ç¤º
- ç®¡ç†åå°

**ç¬¬å››éƒ¨åˆ†ï¼šä¼˜åŒ–ä¸Šçº¿**
- æ€§èƒ½ä¼˜åŒ–
- æƒé™æ§åˆ¶
- éƒ¨ç½²æ–¹æ¡ˆ

2å‘¨å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼"

---

## ğŸ“š ç¬¬ä¸€éƒ¨åˆ†ï¼šéœ€æ±‚åˆ†æ

### ä¸€ã€ç”¨æˆ·è°ƒç ”

```python
class UserResearch:
    """ç”¨æˆ·è°ƒç ”"""
    
    @staticmethod
    def analyze_pain_points():
        """åˆ†æç—›ç‚¹"""
        
        print("="*60)
        print("ç”¨æˆ·ç—›ç‚¹åˆ†æ")
        print("="*60)
        
        pain_points = {
            "æ–°å‘˜å·¥ï¼ˆå…¥èŒ1-3ä¸ªæœˆï¼‰": {
                "ç—›ç‚¹": [
                    "ä¸çŸ¥é“æ–‡æ¡£åœ¨å“ª",
                    "æœç´¢æ‰¾ä¸åˆ°",
                    "å†…å®¹çœ‹ä¸æ‡‚",
                    "ä¸æ•¢é—®äºº"
                ],
                "åœºæ™¯": [
                    "å…¥èŒåŸ¹è®­",
                    "ä¸šåŠ¡å­¦ä¹ ",
                    "æµç¨‹æŸ¥è¯¢",
                    "å·¥å…·ä½¿ç”¨"
                ],
                "éœ€æ±‚": [
                    "å¿«é€Ÿæ‰¾åˆ°ç›¸å…³æ–‡æ¡£",
                    "é€šä¿—æ˜“æ‡‚çš„è§£é‡Š",
                    "ç›¸å…³æ¨è",
                    "ä½¿ç”¨æŒ‡å¯¼"
                ],
                "é¢‘ç‡": "æ¯å¤©10-20æ¬¡"
            },
            
            "è€å‘˜å·¥ï¼ˆåœ¨èŒ1å¹´+ï¼‰": {
                "ç—›ç‚¹": [
                    "è®°ä¸ä½å…·ä½“å†…å®¹",
                    "æ–‡æ¡£ç‰ˆæœ¬æ··ä¹±",
                    "é‡å¤è§£ç­”é—®é¢˜",
                    "çŸ¥è¯†æ›´æ–°æ…¢"
                ],
                "åœºæ™¯": [
                    "æŸ¥è¯¢å…·ä½“è§„å®š",
                    "ç¡®è®¤æµç¨‹ç»†èŠ‚",
                    "å¸®åŠ©æ–°äºº",
                    "çŸ¥è¯†åˆ†äº«"
                ],
                "éœ€æ±‚": [
                    "ç²¾å‡†æœç´¢",
                    "æœ€æ–°ç‰ˆæœ¬",
                    "å¿«é€Ÿå®šä½",
                    "ä¾¿æ·åˆ†äº«"
                ],
                "é¢‘ç‡": "æ¯å‘¨5-10æ¬¡"
            },
            
            "ç®¡ç†è€…": {
                "ç—›ç‚¹": [
                    "çŸ¥è¯†ç®¡ç†æ··ä¹±",
                    "æ— æ³•è¯„ä¼°æ•ˆæœ",
                    "é‡å¤åŸ¹è®­æˆæœ¬é«˜",
                    "çŸ¥è¯†æµå¤±ä¸¥é‡"
                ],
                "åœºæ™¯": [
                    "åˆ¶å®šè§„èŒƒ",
                    "åŸ¹è®­æ–°äºº",
                    "å†³ç­–å‚è€ƒ",
                    "ç»©æ•ˆè¯„ä¼°"
                ],
                "éœ€æ±‚": [
                    "çŸ¥è¯†ä½“ç³»åŒ–",
                    "ä½¿ç”¨æ•°æ®åˆ†æ",
                    "çŸ¥è¯†æ²‰æ·€",
                    "æŒç»­ä¼˜åŒ–"
                ],
                "é¢‘ç‡": "æ¯æœˆæŸ¥çœ‹æŠ¥å‘Š"
            }
        }
        
        for user_type, data in pain_points.items():
            print(f"\nã€{user_type}ã€‘")
            print(f"ä½¿ç”¨é¢‘ç‡ï¼š{data['é¢‘ç‡']}")
            print(f"\nç—›ç‚¹ï¼š")
            for pain in data['ç—›ç‚¹']:
                print(f"  â€¢ {pain}")
            print(f"\nå…¸å‹åœºæ™¯ï¼š")
            for scene in data['åœºæ™¯']:
                print(f"  â€¢ {scene}")
            print(f"\næ ¸å¿ƒéœ€æ±‚ï¼š")
            for need in data['éœ€æ±‚']:
                print(f"  â€¢ {need}")
    
    @staticmethod
    def define_mvp():
        """å®šä¹‰MVP"""
        
        print("\n" + "="*60)
        print("MVPåŠŸèƒ½å®šä¹‰")
        print("="*60)
        
        mvp = {
            "æ ¸å¿ƒåŠŸèƒ½ï¼ˆMust Haveï¼‰": [
                "æ™ºèƒ½é—®ç­”ï¼ˆè¾“å…¥é—®é¢˜ï¼Œè¿”å›ç­”æ¡ˆï¼‰",
                "æ–‡æ¡£æœç´¢ï¼ˆå…³é”®è¯+è¯­ä¹‰æœç´¢ï¼‰",
                "æ–‡æ¡£ä¸Šä¼ ï¼ˆæ”¯æŒå¸¸è§æ ¼å¼ï¼‰",
                "ç»“æœå±•ç¤ºï¼ˆç­”æ¡ˆ+æ¥æºï¼‰"
            ],
            
            "é‡è¦åŠŸèƒ½ï¼ˆShould Haveï¼‰": [
                "ç›¸å…³æ¨èï¼ˆæ¨èç›¸å…³æ–‡æ¡£ï¼‰",
                "ä½¿ç”¨ç»Ÿè®¡ï¼ˆæŸ¥çœ‹çƒ­é—¨é—®é¢˜ï¼‰",
                "æƒé™æ§åˆ¶ï¼ˆæŒ‰éƒ¨é—¨/è§’è‰²ï¼‰",
                "æ–‡æ¡£åˆ†ç±»ï¼ˆè‡ªåŠ¨/æ‰‹åŠ¨åˆ†ç±»ï¼‰"
            ],
            
            "å¯é€‰åŠŸèƒ½ï¼ˆCould Haveï¼‰": [
                "å¤šè¯­è¨€æ”¯æŒ",
                "APIæ¥å£",
                "ç§»åŠ¨ç«¯é€‚é…",
                "å¯¼å‡ºæŠ¥å‘Š"
            ],
            
            "æš‚ä¸å®ç°ï¼ˆWon't Haveï¼‰": [
                "å®æ—¶åä½œç¼–è¾‘",
                "å¤æ‚å·¥ä½œæµ",
                "è§†é¢‘éŸ³é¢‘å¤„ç†",
                "AIç”Ÿæˆå†…å®¹"
            ]
        }
        
        for priority, features in mvp.items():
            print(f"\n{priority}")
            for feature in features:
                print(f"  â€¢ {feature}")
        
        print("\n" + "="*60)
        print("MVPèŒƒå›´ï¼šä»…å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿«é€Ÿä¸Šçº¿")
        print("="*60)

# æ¼”ç¤º
research = UserResearch()
research.analyze_pain_points()
research.define_mvp()
```

---

## ğŸ’» ç¬¬äºŒéƒ¨åˆ†ï¼šå¿«é€Ÿå¼€å‘å®ç°

### ä¸€ã€ç®€åŒ–ç‰ˆRAGç³»ç»Ÿ

```python
from qdrant_client import QdrantClient
from qdrant_client.models import Distance, VectorParams, PointStruct
import hashlib
from typing import List, Dict
import os

class SimpleKnowledgeBase:
    """ç®€åŒ–ç‰ˆçŸ¥è¯†åº“ç³»ç»Ÿ"""
    
    def __init__(
        self,
        collection_name: str = "enterprise_kb",
        embedding_model: str = "BAAI/bge-large-zh-v1.5"
    ):
        """åˆå§‹åŒ–"""
        
        # Qdrantå®¢æˆ·ç«¯
        self.client = QdrantClient(host="localhost", port=6333)
        self.collection_name = collection_name
        
        # Embeddingæ¨¡å‹ï¼ˆå®é™…éœ€è¦åŠ è½½ï¼‰
        # self.embedding_model = SentenceTransformer(embedding_model)
        
        print("="*60)
        print("ä¼ä¸šçŸ¥è¯†åº“ç³»ç»Ÿ")
        print("="*60)
        print(f"Collection: {collection_name}")
        
        # åˆå§‹åŒ–collection
        self._init_collection()
    
    def _init_collection(self):
        """åˆå§‹åŒ–collection"""
        
        try:
            # æ£€æŸ¥æ˜¯å¦å­˜åœ¨
            collections = self.client.get_collections()
            
            if self.collection_name not in [c.name for c in collections.collections]:
                # åˆ›å»ºcollection
                self.client.create_collection(
                    collection_name=self.collection_name,
                    vectors_config=VectorParams(
                        size=1024,  # bge-large-zhå‘é‡ç»´åº¦
                        distance=Distance.COSINE
                    )
                )
                print(f"âœ“ Collectionåˆ›å»ºæˆåŠŸ")
            else:
                print(f"âœ“ Collectionå·²å­˜åœ¨")
        
        except Exception as e:
            print(f"âœ— Collectionåˆå§‹åŒ–å¤±è´¥ï¼š{e}")
    
    def add_document(
        self,
        content: str,
        metadata: Dict
    ) -> str:
        """
        æ·»åŠ æ–‡æ¡£
        
        Args:
            content: æ–‡æ¡£å†…å®¹
            metadata: å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æ¥æºç­‰ï¼‰
        
        Returns:
            æ–‡æ¡£ID
        """
        
        # ç”Ÿæˆæ–‡æ¡£ID
        doc_id = hashlib.md5(content.encode()).hexdigest()
        
        # ç”Ÿæˆå‘é‡ï¼ˆå®é™…éœ€è¦è°ƒç”¨embeddingæ¨¡å‹ï¼‰
        # vector = self.embedding_model.encode(content)
        vector = [0.1] * 1024  # ç¤ºä¾‹
        
        # å­˜å‚¨åˆ°Qdrant
        point = PointStruct(
            id=doc_id,
            vector=vector,
            payload={
                "content": content,
                "title": metadata.get("title", ""),
                "source": metadata.get("source", ""),
                "category": metadata.get("category", ""),
                "created_at": metadata.get("created_at", "")
            }
        )
        
        self.client.upsert(
            collection_name=self.collection_name,
            points=[point]
        )
        
        print(f"âœ“ æ–‡æ¡£å·²æ·»åŠ ï¼š{metadata.get('title', doc_id[:8])}")
        return doc_id
    
    def search(
        self,
        query: str,
        top_k: int = 5
    ) -> List[Dict]:
        """
        æœç´¢æ–‡æ¡£
        
        Args:
            query: æŸ¥è¯¢æ–‡æœ¬
            top_k: è¿”å›ç»“æœæ•°
        
        Returns:
            æœç´¢ç»“æœåˆ—è¡¨
        """
        
        # ç”ŸæˆæŸ¥è¯¢å‘é‡
        # query_vector = self.embedding_model.encode(query)
        query_vector = [0.1] * 1024  # ç¤ºä¾‹
        
        # æœç´¢
        search_result = self.client.search(
            collection_name=self.collection_name,
            query_vector=query_vector,
            limit=top_k
        )
        
        # æ ¼å¼åŒ–ç»“æœ
        results = []
        for hit in search_result:
            results.append({
                "content": hit.payload["content"],
                "title": hit.payload.get("title", ""),
                "source": hit.payload.get("source", ""),
                "score": hit.score
            })
        
        return results
    
    def answer_question(
        self,
        question: str,
        top_k: int = 3
    ) -> Dict:
        """
        å›ç­”é—®é¢˜
        
        Args:
            question: ç”¨æˆ·é—®é¢˜
            top_k: æ£€ç´¢æ–‡æ¡£æ•°
        
        Returns:
            ç­”æ¡ˆç»“æœ
        """
        
        print(f"\né—®é¢˜ï¼š{question}")
        
        # 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£
        print("  1. æ£€ç´¢æ–‡æ¡£...")
        docs = self.search(question, top_k)
        print(f"     æ‰¾åˆ° {len(docs)} ä¸ªç›¸å…³æ–‡æ¡£")
        
        # 2. æ„å»ºä¸Šä¸‹æ–‡
        context = "\n\n".join([
            f"æ–‡æ¡£{i+1}ï¼ˆ{doc['title']}ï¼‰ï¼š\n{doc['content']}"
            for i, doc in enumerate(docs)
        ])
        
        # 3. ç”Ÿæˆç­”æ¡ˆï¼ˆå®é™…éœ€è¦è°ƒç”¨LLMï¼‰
        print("  2. ç”Ÿæˆç­”æ¡ˆ...")
        
        # prompt = f"""åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”é—®é¢˜ï¼š
        # 
        # {context}
        # 
        # é—®é¢˜ï¼š{question}
        # 
        # å›ç­”ï¼š"""
        
        # answer = self.llm.generate(prompt)
        
        # ç¤ºä¾‹ç­”æ¡ˆ
        answer = f"æ ¹æ®æ£€ç´¢åˆ°çš„{len(docs)}ä¸ªæ–‡æ¡£ï¼Œç­”æ¡ˆæ˜¯..."
        
        # 4. è¿”å›ç»“æœ
        result = {
            "question": question,
            "answer": answer,
            "sources": [
                {
                    "title": doc["title"],
                    "source": doc["source"],
                    "score": doc["score"]
                }
                for doc in docs
            ],
            "doc_count": len(docs)
        }
        
        print(f"  3. å®Œæˆï¼å‚è€ƒäº†{len(docs)}ä¸ªæ–‡æ¡£")
        
        return result
    
    def demo(self):
        """æ¼”ç¤ºåŠŸèƒ½"""
        
        print("\n" + "="*60)
        print("åŠŸèƒ½æ¼”ç¤º")
        print("="*60)
        
        # 1. æ·»åŠ æ–‡æ¡£
        print("\n1. æ·»åŠ æ–‡æ¡£")
        docs = [
            {
                "content": "å‘˜å·¥è¯·å‡æµç¨‹ï¼š\n1. æäº¤è¯·å‡ç”³è¯·\n2. ä¸»ç®¡å®¡æ‰¹\n3. HRå¤‡æ¡ˆ\næ³¨æ„ï¼šç—…å‡éœ€è¦åŒ»é™¢è¯æ˜",
                "metadata": {
                    "title": "è¯·å‡æµç¨‹è¯´æ˜",
                    "source": "HRåˆ¶åº¦æ–‡æ¡£",
                    "category": "äººäº‹åˆ¶åº¦"
                }
            },
            {
                "content": "å·®æ—…æŠ¥é”€æ ‡å‡†ï¼š\n1. äº¤é€šè´¹ï¼šå®æŠ¥å®é”€\n2. ä½å®¿è´¹ï¼šä¸€çº¿åŸå¸‚500å…ƒ/å¤©ï¼ŒäºŒçº¿åŸå¸‚300å…ƒ/å¤©\n3. é¤è¡¥ï¼š100å…ƒ/å¤©",
                "metadata": {
                    "title": "å·®æ—…æŠ¥é”€æ ‡å‡†",
                    "source": "è´¢åŠ¡åˆ¶åº¦",
                    "category": "è´¢åŠ¡åˆ¶åº¦"
                }
            }
        ]
        
        for doc in docs:
            self.add_document(doc["content"], doc["metadata"])
        
        # 2. æœç´¢æµ‹è¯•
        print("\n2. æœç´¢æµ‹è¯•")
        results = self.search("å¦‚ä½•è¯·å‡", top_k=2)
        print(f"   æ‰¾åˆ° {len(results)} ä¸ªç»“æœ")
        
        # 3. é—®ç­”æµ‹è¯•
        print("\n3. é—®ç­”æµ‹è¯•")
        answer = self.answer_question("è¯·å‡æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ")
        print(f"   ç­”æ¡ˆï¼š{answer['answer'][:50]}...")
        print(f"   æ¥æºï¼š{len(answer['sources'])}ä¸ªæ–‡æ¡£")

# æ¼”ç¤º
kb = SimpleKnowledgeBase()
kb.demo()
```

### äºŒã€FastAPIåç«¯

```python
from fastapi import FastAPI, UploadFile, File
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel
from typing import List, Optional

app = FastAPI(
    title="ä¼ä¸šçŸ¥è¯†åº“API",
    description="ç®€å•é«˜æ•ˆçš„çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ",
    version="1.0.0"
)

# CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# æ•°æ®æ¨¡å‹
class QueryRequest(BaseModel):
    """æŸ¥è¯¢è¯·æ±‚"""
    question: str
    top_k: int = 3

class QueryResponse(BaseModel):
    """æŸ¥è¯¢å“åº”"""
    answer: str
    sources: List[Dict]
    confidence: float

# APIè·¯ç”±
@app.get("/")
async def root():
    """å¥åº·æ£€æŸ¥"""
    return {
        "status": "healthy",
        "service": "ä¼ä¸šçŸ¥è¯†åº“",
        "version": "1.0.0"
    }

@app.post("/api/query", response_model=QueryResponse)
async def query(request: QueryRequest):
    """
    æ™ºèƒ½é—®ç­”
    
    Args:
        request: æŸ¥è¯¢è¯·æ±‚
    
    Returns:
        æŸ¥è¯¢å“åº”
    """
    
    # è°ƒç”¨çŸ¥è¯†åº“
    # result = kb.answer_question(request.question, request.top_k)
    
    return QueryResponse(
        answer="è¿™æ˜¯ç­”æ¡ˆ...",
        sources=[],
        confidence=0.9
    )

@app.post("/api/documents/upload")
async def upload_document(
    file: UploadFile = File(...),
    title: str = "",
    category: str = ""
):
    """
    ä¸Šä¼ æ–‡æ¡£
    
    Args:
        file: æ–‡ä»¶
        title: æ ‡é¢˜
        category: åˆ†ç±»
    
    Returns:
        ä¸Šä¼ ç»“æœ
    """
    
    # è¯»å–æ–‡ä»¶
    content = await file.read()
    
    # å¤„ç†æ–‡æ¡£
    # doc_id = kb.add_document(content.decode(), {...})
    
    return {
        "status": "success",
        "doc_id": "doc_123",
        "message": "æ–‡æ¡£ä¸Šä¼ æˆåŠŸ"
    }

@app.get("/api/documents")
async def list_documents(
    page: int = 1,
    page_size: int = 20,
    category: Optional[str] = None
):
    """
    æ–‡æ¡£åˆ—è¡¨
    
    Args:
        page: é¡µç 
        page_size: æ¯é¡µæ•°é‡
        category: åˆ†ç±»ç­›é€‰
    
    Returns:
        æ–‡æ¡£åˆ—è¡¨
    """
    
    # æŸ¥è¯¢æ•°æ®åº“
    documents = [
        {
            "id": "doc_1",
            "title": "è¯·å‡æµç¨‹è¯´æ˜",
            "category": "äººäº‹åˆ¶åº¦",
            "created_at": "2024-01-15"
        }
    ]
    
    return {
        "total": len(documents),
        "page": page,
        "page_size": page_size,
        "documents": documents
    }

@app.get("/api/stats")
async def get_stats():
    """
    ç»Ÿè®¡æ•°æ®
    
    Returns:
        ç»Ÿè®¡ä¿¡æ¯
    """
    
    return {
        "total_documents": 156,
        "total_queries": 1234,
        "avg_confidence": 0.87,
        "popular_topics": [
            {"topic": "è¯·å‡æµç¨‹", "count": 45},
            {"topic": "æŠ¥é”€æ ‡å‡†", "count": 38},
            {"topic": "è€ƒå‹¤åˆ¶åº¦", "count": 32}
        ]
    }

print("""
FastAPIæœåŠ¡å·²é…ç½®

å¯åŠ¨ï¼š
uvicorn main:app --reload

è®¿é—®ï¼š
â€¢ APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
â€¢ å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/
""")
```

---

## ğŸ“ è¯¾åç»ƒä¹ 

### ç»ƒä¹ 1ï¼šåŠŸèƒ½å¼€å‘
å®ç°æ–‡æ¡£ä¸Šä¼ åŠŸèƒ½

### ç»ƒä¹ 2ï¼šç•Œé¢å¼€å‘
å¼€å‘æœç´¢ç•Œé¢

### ç»ƒä¹ 3ï¼šæµ‹è¯•ä¼˜åŒ–
æµ‹è¯•å¹¶ä¼˜åŒ–æ€§èƒ½

---

## ğŸ“ çŸ¥è¯†æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **å¿«é€Ÿå¼€å‘**
   - MVPæ€ç»´
   - ä½¿ç”¨æˆç†Ÿç»„ä»¶
   - èšç„¦æ ¸å¿ƒåŠŸèƒ½

2. **ç®€åŒ–æ¶æ„**
   - å•æœºéƒ¨ç½²
   - æœ€å°ä¾èµ–
   - æ˜“äºç»´æŠ¤

3. **ç”¨æˆ·å¯¼å‘**
   - ç†è§£ç—›ç‚¹
   - æ»¡è¶³éœ€æ±‚
   - ç®€å•æ˜“ç”¨

4. **è¿­ä»£ä¼˜åŒ–**
   - å¿«é€Ÿä¸Šçº¿
   - æ”¶é›†åé¦ˆ
   - æŒç»­æ”¹è¿›

---

## ğŸš€ ä¸‹èŠ‚é¢„å‘Š

ä¸‹ä¸€è¯¾ï¼š**ç¬¬119è¯¾ï¼šã€å®æˆ˜ã€‘æ™ºèƒ½å®¢æœç³»ç»Ÿ**

- å®¢æœåœºæ™¯
- å¤šè½®å¯¹è¯
- æƒ…æ„Ÿåˆ†æ
- å·¥å•é›†æˆ

**ç»§ç»­å®æˆ˜ï¼** ğŸ”¥

---

**ğŸ’ª è®°ä½ï¼šå¿«é€Ÿä¸Šçº¿ï¼ŒæŒç»­ä¼˜åŒ–ï¼**

**ä¸‹ä¸€è¯¾è§ï¼** ğŸ‰
