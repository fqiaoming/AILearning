<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450" width="800" height="450">
  <defs>
    <marker id="arrowRAG" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64b5f6"/>
    </marker>
  </defs>
  
  <rect width="800" height="450" fill="#0f0f23"/>
  <text x="400" y="35" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="22" font-weight="bold">RAG (检索增强生成) 架构</text>
  
  <!-- 知识库构建流程 -->
  <text x="200" y="70" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="14" font-weight="bold">📚 知识库构建 (离线)</text>
  
  <rect x="30" y="85" width="100" height="50" rx="8" fill="#1a1a2e" stroke="#4ecdc4" stroke-width="2"/>
  <text x="80" y="115" text-anchor="middle" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="11">文档加载</text>
  
  <line x1="130" y1="110" x2="160" y2="110" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <rect x="170" y="85" width="100" height="50" rx="8" fill="#1a1a2e" stroke="#667eea" stroke-width="2"/>
  <text x="220" y="115" text-anchor="middle" fill="#667eea" font-family="Arial, sans-serif" font-size="11">文本分块</text>
  
  <line x1="270" y1="110" x2="300" y2="110" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <rect x="310" y="85" width="100" height="50" rx="8" fill="#1a1a2e" stroke="#ff6b6b" stroke-width="2"/>
  <text x="360" y="115" text-anchor="middle" fill="#ff6b6b" font-family="Arial, sans-serif" font-size="11">向量化</text>
  
  <line x1="410" y1="110" x2="440" y2="110" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <rect x="450" y="85" width="120" height="50" rx="8" fill="#16213e" stroke="#81c784" stroke-width="2"/>
  <text x="510" y="115" text-anchor="middle" fill="#81c784" font-family="Arial, sans-serif" font-size="11">向量数据库</text>
  
  <!-- 查询流程 -->
  <text x="400" y="175" text-anchor="middle" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="14" font-weight="bold">🔍 查询流程 (在线)</text>
  
  <!-- 用户查询 -->
  <rect x="30" y="200" width="120" height="60" rx="8" fill="#1a1a2e" stroke="#4ecdc4" stroke-width="2"/>
  <text x="90" y="225" text-anchor="middle" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="12" font-weight="bold">👤 用户</text>
  <text x="90" y="245" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="9">"什么是RAG?"</text>
  
  <line x1="150" y1="230" x2="190" y2="230" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <!-- 查询向量化 -->
  <rect x="200" y="200" width="120" height="60" rx="8" fill="#1a1a2e" stroke="#ff6b6b" stroke-width="2"/>
  <text x="260" y="225" text-anchor="middle" fill="#ff6b6b" font-family="Arial, sans-serif" font-size="11" font-weight="bold">🔄 Embedding</text>
  <text x="260" y="245" text-anchor="middle" fill="#a0a0a0" font-family="Arial, sans-serif" font-size="9">查询向量化</text>
  
  <line x1="320" y1="230" x2="360" y2="230" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <!-- 检索 -->
  <rect x="370" y="200" width="120" height="60" rx="8" fill="#1a1a2e" stroke="#81c784" stroke-width="2"/>
  <text x="430" y="225" text-anchor="middle" fill="#81c784" font-family="Arial, sans-serif" font-size="11" font-weight="bold">🔍 检索</text>
  <text x="430" y="245" text-anchor="middle" fill="#a0a0a0" font-family="Arial, sans-serif" font-size="9">Top-K相似文档</text>
  
  <line x1="490" y1="230" x2="530" y2="230" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <!-- Prompt组装 -->
  <rect x="540" y="200" width="120" height="60" rx="8" fill="#1a1a2e" stroke="#ffd93d" stroke-width="2"/>
  <text x="600" y="225" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="11" font-weight="bold">📝 Prompt</text>
  <text x="600" y="245" text-anchor="middle" fill="#a0a0a0" font-family="Arial, sans-serif" font-size="9">拼接上下文</text>
  
  <line x1="660" y1="230" x2="700" y2="230" stroke="#64b5f6" stroke-width="2" marker-end="url(#arrowRAG)"/>
  
  <!-- LLM -->
  <rect x="710" y="200" width="70" height="60" rx="8" fill="#16213e" stroke="#667eea" stroke-width="2"/>
  <text x="745" y="235" text-anchor="middle" fill="#667eea" font-family="Arial, sans-serif" font-size="11" font-weight="bold">🤖 LLM</text>
  
  <!-- 回答 -->
  <path d="M 745 260 L 745 320 L 90 320 L 90 280" stroke="#81c784" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <rect x="30" y="280" width="120" height="60" rx="8" fill="#1a1a2e" stroke="#81c784" stroke-width="2"/>
  <text x="90" y="305" text-anchor="middle" fill="#81c784" font-family="Arial, sans-serif" font-size="11" font-weight="bold">💬 回答</text>
  <text x="90" y="325" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="9">基于检索的回答</text>
  
  <!-- 底部说明 -->
  <rect x="50" y="370" width="700" height="60" rx="8" fill="#16213e"/>
  <text x="400" y="395" text-anchor="middle" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="12" font-weight="bold">💡 RAG优势：结合检索与生成，解决LLM知识截止和幻觉问题</text>
  <text x="400" y="415" text-anchor="middle" fill="#a0a0a0" font-family="Arial, sans-serif" font-size="10">可动态更新知识库 | 回答可溯源 | 降低幻觉率</text>
</svg>

